{% comment %}
  Custom taxonomy display with category translation support
{% endcomment %}

{% assign current_lang = page.lang | default: site.default_language | default: 'ko' %}
{% assign ui_text = site.data.ui-text[current_lang] | default: site.data.ui-text['ko'] %}

{% if site.tag_archive.type and page.tags[0] %}
  {% unless site.tag_archive.type == "liquid" %}
    <p class="page__taxonomy">
      <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> {{ ui_text.tags.title | default: "Tags:" }} </strong>
      <span itemprop="keywords">
      {% for tag_word in page.tags %}
        {% assign translated_tag = tag_word | translate_tag: current_lang %}
        <a href="{{ tag_word | tag_url_with_lang: current_lang }}" class="page__taxonomy-item p-category" rel="tag">{{ translated_tag }}</a>{% unless forloop.last %}<span class="sep">, </span>{% endunless %}
      {% endfor %}
      </span>
    </p>
  {% else %}
    <p class="page__taxonomy">
      <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> {{ ui_text.tags.title | default: "Tags:" }} </strong>
      <span itemprop="keywords">
      {% for tag_word in page.tags %}
        {% assign translated_tag = tag_word | translate_tag: current_lang %}
        <a href="{{ site.tag_archive.path }}#{{ translated_tag | slugify }}" class="page__taxonomy-item p-category" rel="tag">{{ translated_tag }}</a>{% unless forloop.last %}<span class="sep">, </span>{% endunless %}
      {% endfor %}
      </span>
    </p>
  {% endunless %}
{% endif %}

{% if site.category_archive.type and page.categories[0] %}
  {% unless site.category_archive.type == "liquid" %}
    <p class="page__taxonomy">
      <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> {{ ui_text.categories.title | default: "Categories:" }} </strong>
      <span itemprop="about">
      {% for category_word in page.categories %}
        {% assign translated_category = category_word | translate_category: current_lang %}
        <a href="{{ category_word | category_url_with_lang: current_lang }}" class="page__taxonomy-item p-category">{{ translated_category }}</a>{% unless forloop.last %}<span class="sep">, </span>{% endunless %}
      {% endfor %}
      </span>
    </p>
  {% else %}
    <p class="page__taxonomy">
      <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> {{ ui_text.categories.title | default: "Categories:" }} </strong>
      <span itemprop="about">
      {% for category_word in page.categories %}
        {% assign translated_category = category_word | translate_category: current_lang %}
        <a href="{{ site.category_archive.path }}#{{ translated_category | slugify }}" class="page__taxonomy-item p-category">{{ translated_category }}</a>{% unless forloop.last %}<span class="sep">, </span>{% endunless %}
      {% endfor %}
      </span>
    </p>
  {% endunless %}
{% endif %}