---
layout: null
sitemap: false
---
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:xhtml="http://www.w3.org/1999/xhtml">
{% comment %}Posts with multilingual support{% endcomment %}
{% for post in site.posts %}
  <url>
    <loc>{{ site.url }}{{ post.url }}</loc>
    {% if post.last_modified_at %}
    <lastmod>{{ post.last_modified_at | date_to_xmlschema }}</lastmod>
    {% elsif post.date %}
    <lastmod>{{ post.date | date_to_xmlschema }}</lastmod>
    {% endif %}
    
    {% comment %}Add alternate language links if translations exist{% endcomment %}
    {% if post.translation_key %}
      {% assign translations = site.posts | where: "translation_key", post.translation_key %}
      {% assign current_lang = post.lang | default: site.default_language | default: 'ko' %}
      
      {% for translation in translations %}
        {% assign trans_lang = translation.lang | default: site.default_language | default: 'ko' %}
        {% unless trans_lang == current_lang %}
    <xhtml:link rel="alternate" hreflang="{{ trans_lang }}" href="{{ site.url }}{{ translation.url }}" />
        {% endunless %}
      {% endfor %}
      
      {% comment %}Add x-default link (pointing to default language version){% endcomment %}
      {% assign default_lang = site.default_language | default: 'ko' %}
      {% assign default_translation = translations | where: "lang", default_lang | first %}
      {% if default_translation %}
    <xhtml:link rel="alternate" hreflang="x-default" href="{{ site.url }}{{ default_translation.url }}" />
      {% endif %}
    {% endif %}
  </url>
{% endfor %}

{% comment %}Pages{% endcomment %}
{% for page in site.pages %}
  {% unless page.name == 'sitemap.xml' or page.name contains 'sitemap-' %}
    {% unless page.sitemap == false %}
  <url>
    <loc>{{ site.url }}{{ page.url }}</loc>
    {% if page.last_modified_at %}
    <lastmod>{{ page.last_modified_at | date_to_xmlschema }}</lastmod>
    {% endif %}
  </url>
    {% endunless %}
  {% endunless %}
{% endfor %}
</urlset>